---
layout: post
title: 多线程
date: 2017-10-21
tag: Java学习
---   

# 多线程
进程:一个应用程序的一次完整运行
线程:一个进程中相对独立的调度及运行单位
多线程:创建多个线程使得多个线程同时运行



创建线程：
java.lang包中 Thread类

1. 继承Thread类
1. 实现Runnable接口(解决单继承缺陷)
1. 实现Collable接口(解决以上两种方式无返回值的缺陷)


线程的生命周期:==新生状态---start()-----可运行状态---时间片-----运行状态-----join()/sleep()..---阻塞状态-----run()完毕-----死亡==

重点:掌握Thread中的方法

线程同步：使线程排队（Syncronized）

多个线程在并发时共享资源时，产生数据错乱。
1. 给共享资源对象加锁
1. 私有化共享资源

（Syncronized）：方法——>同步方法（线程安全）

实例方法：共享资源对象就是访问当前方法的对象（如果一个线程个访问一个同时被访问的方法，那么其他的线程不能同步访问此对象的其他被同步的方法）

static方法：共享资源对象（）

```
同步代码块：Syncronized(共享资源对象){
    //同步代码
}
```

注意：不管是同步方法还是代码块，实质都是给共享资源对象加锁，如果没有明确的共享资源对象时，只是想让有限的代码被同步时，创建零长度的byte[0]作为共享资源对象，syncronized不能修饰构造方法，抽象方法，成员属性，还不能被继承。

同步技术（sycronized）:一般在run()方法里。


- 按方法原则加锁
- 按共享资源块加锁

死锁现象：测试死锁

线程通信：==两个线程，在共享前提下，存在需求和供给时，通过信息传递实现相互制约和调度==


```
- wait()
- notify()
- notifyAll()
```

